.DATA
	MATRIX:.WORD -1, 2, 3, 4, 5, 6, 7, 8, 9
	ORDER:.WORD 3
	NORM_ARRAY:.WORD 0, 0, 0
	NORM:.WORD 0
.TEXT
	LDR R0,=MATRIX
LDR R1,=ORDER
	LDR R2,=NORM_ARRAY
	
	LDR R3,[R0]
	LDR R4,[R1]
	
	MOV R5,R4
	MUL R8,R5,R5
	
	MOV R5,#0
	
FIRST:
	MOV R6,R5
	MOV R7,#0
	MOV R9,#4
	MUL R9,R6,R9
	LDR R3,[R0,R9]
SECOND:
           ; Abs() value of R3
	ASR R10,R3,#31
	ADD R3,R10,R3
	EOR R3,R3,R10
	
	ADD R7,R7,R3
	ADD R6,R6,R4
	
	MOV R9,#4
	MUL R9,R6,R9
	LDR R3,[R0,R9]
	CMP R6,R8
	BLT SECOND
	
	ADD R5,R5,#1
	STR R7,[R2],#4
	CMP R5,R4
	BLT FIRST	
FIND_MAX:
	LDR R0,=NORM_ARRAY
	LDR R4,=ORDER
	LDR R4,[R4]
	MOV R3,#1
	LDR R2,[R0]
	
LOOP:
	LDR R1,[R0],#4
	CMP R1,R2
	MOVGE R2,R1
	
	ADD R3,R3,#1
	CMP R3,R4
	BLE LOOP
	LDR R5,=NORM
	STR R2,[R5]
	SWI 0X011
